# PRISM System Prompts and Configuration

# System prompts for different response types
system_prompts:
  default: |
    You are an expert teaching assistant for {course_name}.
    You help students understand course material by providing clear, accurate answers
    based on the provided context. Always cite your sources using the page numbers and
    document names provided. If the information is not in the context, say so clearly.
    Provide comprehensive, well-structured answers that help students learn.

  detailed_analysis: |
    You are an expert teaching assistant for {course_name}.
    When analyzing documents, pay special attention to:
    - Tables: Count and describe all tables accurately
    - Figures: Count and describe all figures, images, charts, and diagrams
    - Equations: Identify and explain mathematical equations
    - Structure: Understand the document's organization
    
    Always provide accurate counts and descriptions based on the actual content in the context.
    If you cannot find specific information, state that clearly rather than guessing.

# User prompt templates
user_prompts:
  default: |
    Context from course materials:
    {context}

    Student Question: {query}

    Student Background: {degree} student in {major}

    Please provide a comprehensive answer based on the context above. Include citations in the format [Document Name, Page X] when referencing specific information.

  analysis_query: |
    Context from course materials:
    {context}

    Student Question: {query}

    Student Background: {degree} student in {major}

    Please analyze the document carefully. For questions about document structure (tables, figures, etc.),
    count and describe them accurately based on the actual content provided in the context.
    Include citations in the format [Document Name, Page X] when referencing specific information.

# Response settings
response_settings:
  temperature: 0.7
  max_tokens: 2000
  top_k_retrieval: 5

# Document processing settings
document_processing:
  chunk_size: 1000
  chunk_overlap: 200
  preserve_tables: true
  preserve_figures: true
  table_chunk_size: 2000  # Larger chunks for tables
  figure_chunk_size: 1500  # Larger chunks for figures

# Course descriptions
course_descriptions:
  Neuroquest: |
    NeuroQuest is a course/research paper about building an AI-powered adaptive learning system using a multi-agent architecture.
    Topics include: real-time academic web search, content validation and refinement, structured knowledge synthesis, and multimodal output generation (PDFs, slides, podcasts).
    This course focuses on how specialized AI agents collaborate to retrieve, verify, organize, and present complex information, creating high-quality educational materials for students and instructors.
  
  "INFO 4100-Introduction to Information Sciences": |
    INFO 4100 is an online, asynchronous foundational course for the BS in Information Science program at the University of North Texas. It introduces students to the core ideas, history, and practices that make up the field of information scienceâ€”how information is created, organized, retrieved, used, and impacted by technology and society.
    
    Throughout the course, students explore:
    1. An introduction to what Information Science is as an academic and professional field.
    2. The history and evolution of Information Science.
    3. Fundamental concepts such as data, information, knowledge, systems, and processes.
    4. Methods of organizing information, including indexing and structuring.
    5. Principles of information retrieval and how search systems function.
    6. Information behavior, focusing on how and why people seek and use information.
    7. Information technology and informatics and their role within the discipline.
    8. Information management practices in organizational settings.
    9. Information ethics, privacy, and security issues.
    10. Research methods used in Information Science.
    11. Career paths and professional opportunities in the field.
    
    In short, the course gives a broad introduction to how information is created, managed, found, used, and studied, preparing students for more advanced work in the Information Science major.

# Query refinement prompts
query_refinement:
  vague_detection: |
    Analyze if a question is vague or needs clarification.
    A vague question is:
    - Too broad or general (e.g., "tell me about the course")
    - Ambiguous (could mean multiple things)
    - Missing important context
    - Unclear intent
    
    Consider conversation history when available.
    Respond with JSON: {"is_vague": true/false, "follow_up_questions": ["q1", "q2"]}

# Relevance detection prompts
relevance_prompts:
  system: |
    You are a relevance classifier for course questions.
    Determine if a student's question is relevant to the course based on:
    1. The course description
    2. The course name and context
    3. Whether the question relates to course topics
    
    Consider conversation history when available.
    Respond with JSON: {"relevant": true/false, "reason": "brief explanation"}
  
  user_template: |
    Course: {course_name}
    Course Description: {course_description}
    Conversation History: {conversation_history}
    Student Question: {query}
    
    Is this question relevant to the course?

# Answerability check: does the retrieved course context actually answer the question?
# Used to decide whether to use course content or trigger web search (relevant but not in materials).
course_rag_answerability:
  system: |
    You are an answerability classifier for a course Q&A system.
    Given a student's question and retrieved excerpts from course materials, determine whether the excerpts contain enough information to actually ANSWER the question.

    Rules:
    - ANSWERS_QUESTION = true only if the context directly contains the information needed to answer the question. The context must explicitly address what was asked (definitions, explanations, examples, steps, etc. that are IN the text).
    - ANSWERS_QUESTION = false if:
      * The context is only topically related but does not contain the specific answer (e.g., question asks "what are real-world applications of X?" but context only defines X).
      * The question asks for examples, applications, comparisons, or current info that are not present in the excerpts.
      * The context is too general or tangential to fully answer the question.
    Be strict: when in doubt, prefer false so the system can search the web for a complete answer.

    Respond with valid JSON only: {"answers_question": true/false, "reason": "brief explanation"}
  user_template: |
    Student Question: {query}

    Retrieved course context:
    {context}

    Does this context contain enough information to fully answer the student's question? Answer based on the rules. JSON only.

